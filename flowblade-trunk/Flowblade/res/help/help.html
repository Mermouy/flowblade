 <!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
  <link rel="stylesheet" href="style.css">
<script src="toc.js" type="text/javascript"></script>
</head>

<body>

<div id="content">

<script>
window.onload = function () {
    var toc = "";
    var level = 0;

    document.getElementById("toccontent").innerHTML =
        document.getElementById("toccontent").innerHTML.replace(
            /<h([\d])>([^<]+)<\/h([\d])>/gi,
            function (str, openLevel, titleText, closeLevel) {
                if (openLevel != closeLevel) {
                    return str;
                }

                if (openLevel > level) {
                    toc += (new Array(openLevel - level + 1)).join("<ul>");
                } else if (openLevel < level) {
                    toc += (new Array(level - openLevel + 1)).join("</ul>");
                }

                level = parseInt(openLevel);

                var anchor = titleText.replace(/ /g, "_");
                toc += "<li><a href=\"#" + anchor + "\">" + titleText
                    + "</a></li>";

                return "<h" + openLevel + "><a name=\"" + anchor + "\">"
                    + titleText + "</a></h" + closeLevel + ">";
            }
        );

    if (level) {
        toc += (new Array(level + 1)).join("</ul>");
    }

    document.getElementById("toc").innerHTML += toc;
};
</script>

    <div id="toc">
        <h3>Table of Contents</h3>
    </div>


 <a href="basic_editing.html">Basic Editing</a> 
 <a href="edit_tools.html">Edit Tools</a> 
 <a href="filtering.html">Filtering image and audio</a> 

<div id="toccontent">

<h2>1. Introduction</h2>

<p>
Flowblade Movie Editor is a <b>multitrack non-linear video editor</b> for Linux.
<p/>
<p>
With Flowblade Movie Editor you can compose movies from video clips, audio clips and graphics files. Clips can be cut at the desired frames, filters can be added to clips, and you can create multilayer composite images using compositor objects.
</p>
<p>
In Flowblade  clips are usually automatically placed tightly after the previous clip - or between two existing clips - when they
are inserted on the timeline. Edits are fine tuned by trimming in and out points of clips, or by cutting and deleting parts of clips.
</p>

http://sites.google.com/site/phantom2dsite/Home/flowbladeappicon.png
----
<h2>Creating Composited Images</h2>

Flowblade Movie Editor uses Compositors to mix images from two different tracks.
By combining multiple tracks and multiple Compositors complex composite images can be achieved.

Compositors have a Source track and a Destination track. On the Timeline Compositor is displayed as a dark rectangular object that is displayed on top of two tracks. Source track is always the one above Compositor, but Destination track may be any of the tracks below it.

Parameters defining the resulting composite are edited in the <b>Compositors</b> tab.

There is a subtype of Compositors called Blenders.
Blenders do the standard blends like Add, Softlight and Darken,
but offer no transformations, nor any method to control the amount of blend.

<h3>Compositor Workflow</h3>
# Creating a Compositor
<li> Click <b>Right Mouse</b> on any clip on tracks from V5 to V2 and select for example <b>Add Compositor -> Dissolve</b> or <b>Add Blender -> Softlight</b> from popupmenu to create a new Compositor.</li>
# Trimmimg or Moving a Compositor
<li> To trim Compositor start and end points: Press and drag <b>Left Mouse</b> near either end of Compositor on Timeline.</li>
<li> To move Compositor: Press and drag <b>Left Mouse</b> in the middle of Compositor on Timeline.</li>
# Editing Compositor Parameters in Compositors Tab
<li> Double click Compositor with <b>Left Mouse</b>.</li>
<li> Click <b>Right Mouse</b> on any Compositor and select Open In Compositor Editor</li>
<li> Edit parameters using value editors.</li>
# Deleting Compositor
<li> Click <b>Left Mouse</b> on any Compositor to select it and press <b>Delete</b> key.</li>

<h3>Compositor are executed from top to bottom</h3>
In Flowblade Movie Editor <b>the order of rendering is top-to-bottom</b>,
instead of bottom-to-top like in Gimp or Photoshop.

When attempting certain type of multilayer composites this yields results that seem unintuitive,
unless the user is aware of rendering order of Compositors.

<h4>Rendering A Composited Frame</h4>
# For each frame it is checked if there is a Compositor covering this frame that has track V5 as Source track.
# If such Compositor is found, do composite on Destination track.
# If next track is Source of Compositor covering this frame, that Compositor is rendered.
# This is done until there is track that isn't a Source track of any Compositor. That frame on last this track may already been a Destination of a Compositor.

<h3>EXAMPLE: Creating a 3-layer composite</h3>
In this example we demonstrate how top-to-bottom Compositor
order affects compositing. We are trying to make word 'GO' apperar on top of 2-color
background made by combining red and blue Color Clips using 'Free Stripes' wipe.

To make alpha transparency work the GO.PNG graphic has to composited using 'Dissolve'.

_<b>clips: RED and BLUE Color Clips and GO.PNG graphic with alpha transparency</b>_

http://sites.google.com/site/phantom2dsite/Home/comp_clips.png

_<b>Desired result</b>_

http://sites.google.com/site/phantom2dsite/Home/correct_comp.png

<h4>Gimp/Photoshop style layer order yields wrong result</h4>
Here we have arranged clips on the tracks as we would arrange layers in Gimp.

_<b>Gimp style layer order</b>_

http://sites.google.com/site/phantom2dsite/Home/wrong_timeline.png

What happens here is that first 'GO.PNG' is composited on 'RED' Color Clip, and the resulting image is composited using 'Free Stripes' wipe on top of 'BLUE' Color Clip. We get the wrong result.

_<b>Wrong result</b>_

http://sites.google.com/site/phantom2dsite/Home/wrong_comp.png

<h4>Correct layer order when compositing order is top-to-bottom</h4>

Here we have arranged clips in correct order for the desired result.

_<b>Correct layer order</b>_

http://sites.google.com/site/phantom2dsite/Home/correct_timeline.png

Here 'RED' Color Clip  is first composited using 'Free Stripes' wipe on 'BLUE' Color Clip. After that 'GO.PNG' is composited on top of the resulting image (that is already rendered on track V1) using 'Dissolve' to get final output image.

_<b>Destination track in 'Region' Compositor is V1, Source track is V3</b>_

http://sites.google.com/site/phantom2dsite/Home/correct_dest.png

_<b>Correct result</b>_

http://sites.google.com/site/phantom2dsite/Home/correct_comp.png

<h3>TABLE: Compositors</h3>
|| <b>Compositor</b> || <b>Description</b> ||
||Affine||Does affine transform (move-rotate-skew) before compositing. Has keyframed mix, position and rotation, and non-keyframed skew.||
||Affine Blend||Does affine transform (move-rotate) before compositing in any blend mode. Has keyframed mix, position and rotation.||
||Blend||Does keyframed mix in any blend mode.||
||Dissolve||Does keyframed mix.||
||Picture in Picture||Does picture in picture composite with keyframed mix and transform.||
||Region||Does picture in picture composite with keyframed mix, wipe and transform.||
||Wipe||Does a non-keyframed full wipe that has the same duration as the clip.||

<h3>TABLE: Blenders</h3>
|| <b>Blend Mode</b> || <b>Description</b> ||
||Add||This blend mode simply adds pixel values of one layer with the other. In case of values above 255 (in the case of RGB), white is displayed.||
||Burn||The Burn mode divides the inverted bottom layer by the top layer, and then inverts the result.||
||Color Only||Color blend mode preserves the luma of the bottom layer, while adopting the hue and chroma of the top layer.||
||Darken||Darken takes the darkest value for each pixel from each layer.||
||Difference||Difference subtracts the top layer from the bottom layer or the other way round, to always get a positive value. Blending with black produces no change, as values for all colours are 0. (The RGB value for black is 0,0,0). Blending with white inverts the picture.One of the main utilities for this is during the editing process, when it can be used to verify alignment of pictures with similar content||
||Divide||This blend mode simply divides pixel values of one layer with the other.||
||Dodge||Dodge blend mode divides the bottom layer by the inverted top layer. This decreases the contrast to make the bottom layer reflect the top layer: the brighter the top layer, the more its colour affects the bottom layer.||
||Grain Extract|| - ||
||Grain Merge|| - ||
||Hardlight||Hard Light combines Multiply and Screen blend modes. As opposed to Overlay, the contrast is also increased.||
||Hue||Hue blend mode preserves the luma and chroma of the bottom layer, while adopting the hue of the top layer.||
||Lighten||Lighten takes the lightest pixel from each layer.||
||Multiply||Multiply blend mode multiplies the numbers for each pixel of the top layer with the corresponding pixel for the bottom layer. As a simple multiplication for 8-bit/channel can get values as high as 65025 (255x255), which is far higher than the maximum allowed value, 255, the result is divided by 255.||
||Overlay||Overlay combines Multiply and Screen blend modes. Light parts of the picture become lighter and dark parts become darker. An overlay with the same picture looks like an S-curve.||
||Saturation||Saturation blend mode preserves the luma and hue of the bottom layer, while adopting the chroma of the top layer.||
||Screen||With Screen blend mode the values of the pixels in the two layers are negated, multiplied, and then negated again. This is in some way the opposite of multiply. The result is a brighter picture.||
||Softlight||This is a softer version of Overlay. Applying pure black or white does not result in pure black or white.||
||Subtract||This blend mode simply subtracts pixel values of one layer with the other. In case of negative values, black is displayed.||
||Value||Value blend mode preserves the hue and chroma of the bottom layer, while adopting the luma of the top layer.||

_Blend descriptions are from Wikipedia and are under Creative Commons Attribution-ShareAlike License._

http://sites.google.com/site/phantom2dsite/Home/flowbladeappicon.png
----


http://sites.google.com/site/phantom2dsite/Home/flowbladeappicon.png
----
<h2>Range Log</h2>

Flowblade provides functionality save, name and manage in-point to out point ranges on media items.

This useful then there are media items that contain multiple areas of interest or if the user wants to save in and out points of an edit for later use.

A typical example use case for the feature would be:
<li> user has a long clip of a speech delivered at some social function</li>
<li> user wants to mark and name the interesting parts of the speech</li>

<h3>Creating Range Log Items</h3>
<li> <b>With Clip Monitor</b></li>
# Add Media Item to Clip Monitor
# Set Mark In and Mark Out points
# Press 'Log Current marked Range' -button on the bottom left in the Range Log panel
<li> <b>Drag'n'Drop from Timeline</b></li>
# Drag a Clip from Timeline on top of Items list view in the Range Log panel


<h3> Adding Range Log items to Timeline</h3>
<li> <b>With buttons</b></li>
<li> Press 'Append displayed..." -button on the bottom right corner to append all Items as Clips on active Track</li>
<li> Press 'Insert selected..." -button next to bottom right corner button to insert all selected Items on active track at nearest cut from the currently displayed Timeline position</li>
<li> <b>Drag'n'Drop into Timeline</b></li>
<li> Select a Range Log item and drag it into the desired position on Timeline</li>

<h3>Managing Range Log Items</h3>
<li> Use top row drop down menu to select the displayed Items Group</li>
<li> Use the top left corner button drop down menu to create, rename and delete Items Groups</li>

http://sites.google.com/site/phantom2dsite/Home/flowbladeappicon.png
----
<h2>Clip Syncing and Audio Split Editing</h2>

In Flowblade Movie Editor you can <b>set a clip's positions to follow another clip's positions</b> on request.

This is done by <b>setting clip to be a Sync Child Clip</b> clips by selecting a
clip on track V1 as its Sync Parent Clip.

<b>Only clips on track V1 can be Sync Parent Clips</b>. This is done to encourage edit style in which the main body of the Sequence is on track V1 and composites and audio split edits are done relative to the clip sequence on track V1.

<b>Sync feature helps preserve earlier work</b> an multitrack composites and audio split edits when clips are no longer in correct positions relative to each other, because of edits elsewhere on the Sequence.

<b>Resyncs are only done on request</b> to avoid jumping of clips on the timeline while editing. Explicit resyncs are also better from the point of view of avoiding side effects when doing edits.

<h3>Setting Sync Parent</h3>
# Click <b>Right Mouse</b> on clip and select Select Sync Parent Clip... on any clip NOT on track V1.
# Cursor turns into a Target Cross. Click on clip on track V1 to select it as Sync Parent Clip.
# Sync Relation is established between the two clips. Cursor turns back into a default pointer.
# Sync State Stripe appers on the Sync Child Clip. Sync State Indicator Stripes on Clips:
<li> Green means that clip is in sync with parent.</li>
<li> Red means that clip is NOT in sync with parent.</li>
<li> Gray means that Sync Parent Clip is no longer on track V1.</li>

<h3>Resyncing Sync Child Clips</h3>
<li> Select <b>Edit -> Resync All to resync</b> from application menu all Sync Child Clips.</li>
<li> Select <b>Edit - >Resync Selected to resync</b> from application menu selected Sync Child Clips.</li>
<li> Click <b>Right Mouse</b> on Sync Child Clip and select <b>Resync</b> from popoup menu to resync single clip.</li>
<li> Press <b>Resync Selected</b> Bbtton to resync selected Sync Child Clips.</li>

<h3> Clearing Sync Parent Relations </h3>
<li> Click <b>Right Mouse</b> on Sync Child Clip and select Clear Sync Relation.</li>

<h3>Syncing Composited Clips</h3>
<li> If appropriate set all clips that are part of a multitrack composite synched to the same clip.</li>

<h3>Audio Split Syncing</h3>
<li> Click <b>Right Mouse</b> on clip in track V1 and select Split Audio Synched.</li>
<li> Edit audio split using Two Roll Trim mode to maintain sync with parent clip.</li>
<li> Resync Audio as needed.</li>

http://sites.google.com/site/phantom2dsite/Home/flowbladeappicon.png
----
<h2> Slow / Fast Motion </h2>

In Flowblade motion effects are achived by <b>rendering slow / fast motion versions of video clips</b> and placing those on the timeline.

<h3> Creating Motion Clips </h3>
# Right click on a Media File and select <b>Render Slow / Fast Motion File</b> from menu
# Edit parameters for the new motion Clip
<li> Set speed</li>
<li> Give name and location for motion Clip </li>
<li> Select rendering parameters for motion Clip. It is probably a good idea to use a <b>lossless format</b> here to avoid any generational quality losses.</li>
<li> Select render range, either:</li>
<b> Full Source Clip
</b> From Source Clip Mark In to Mark Out
# Click <b>Render</b> button to create a new motion Clip

http://sites.google.com/site/phantom2dsite/Home/flowbladeappicon.png
----

<h2>Proxy Editing</h2>

Proxy editing is a method of editing in which original media clips are presented on timeline by proxy clips. Proxy clips usually have smaller data rate and less CPU intensive decoding.

There are two main reasons to use proxy editing to create programs:
<li> Original media from which the program is edited makes too high demands for either disk bandwidth or CPU processing power for decoding to enable responsive editing </li>
<li> Original is kept on network server, slow external disk or other media with restricted access and does not provide responsice editing if accessed directly.</li>

<h3>Generic Proxy Editing workflow</h3>

All proxy editing workflows have the same phases:
# Render proxy media from original media
# Replace original media with proxy media
# Edit using proxy media
# Replace proxy media with original media
# Render final program using original media

<h3>Flowblade proxy editing</h3>
# Creating Proxy Media
<li> Select <b>Project->Proxy Manager</b> in menu and set proxy file settings in <b>Proxy Encoding</b> area  </li>
<li> Select Video Media files in <b>'Media'</b> Panel</li>
<li> Press button with proxy file icon next Delete button in 'Media' Panel</li>
<li> If Project is already in <b>'Using Proxy Media'</b> proxy mode, timeline clips with original media that had proxy media rendered to will be replaced with proxy media immediately</li>
# Converting to use Proxy media
<li> Select <b>Project->Proxy Manager</b> to open Proxy Manager</li>
<li> Press <b>Use Proxy Media</b> button</li>
# Editing with proxy media
<li> Clips that use proxy media have a blue stripe indicating that status</li>
<li> A proxy editing indicator icon is displayed at left bottom corner</li>
<li> If new proxy media is rendered timeline clips using the original media in question will be replaced with proxy media immediately</li>
<li> Project can be saved normally and converted after load to use original media</li>
# Converting to use Original Media
<li> Select <b>Project->Proxy Manager</b> to open Proxy Manager</li>
<li> Press <b>Use Original Media</b> button</li>

<h3>Important notes about Flowblade proxy editing</h3>

Flowblade uses a programming techique that changes the paths used by media and clips to point either to proxy media or original media. Changing from one to another is implemented by writing a project file to disk and replacing paths when project is read back. This has important implications on how proxy editing works in Flowblade:

<b>IMPORTANT</b>
<li> <b>It is only possible to use all proxy media and clips or all original media</b></li>
<li> <b>DESTROYING ANY MEDIA while doing proxy editing WILL PREVENT CONVERTING BACK TO USING ORIGINAL MEDIA</b> </li>


http://sites.google.com/site/phantom2dsite/Home/flowbladeappicon.png
----

<h2>Rendering</h2>

<h3>Rendering Movie</h3>

<h4>Selecting Parameters</h4>
<li> <b>Folder File Select</b> button will select folder to place the output file in.</li>
<li> <b>Name</b> entry widget provides means to set the name of the output file.</li>
<li> Use <b>Encoding Format</b> and untitled <b>Quality</b> drop down menus make to select the type of file to be rendered.</li>

<h4>Rendering output</h4>
# Press <b>Render</b> Button to begin rendering.
# A Render Window will open displaying information on file path of render file, estimated time left, render time and a Progress bar widget.
# After rendering is complete, Render Window will close automatically.


<h3> Batch Render Queue </h3>

<b>Feature will be available on 0.12 release</b>

Flowblade offers a dedicated Batch Render Queue application. Batch Render Queue is a separate application to Flowblade and runs on different process, so it is possible to close Flowblade without affecting ongoing renders.

Render queue is a persistent data structure of render items on disk. Each item consists of a Project file and saved render parameters. Users can add render items to render queue and then render the whole queue without any further user input.

<b>Adding Items to Batch Render Queue</b>

<li> Press <b>To Queue</b> button in <b>Render</b> tab.</li>
<li> Select <b>Render->Add to Batch Render Queue...</b> item from menu</li>

<b>Using Batch Render Queue application</b>

<li> Open Batch Render Queue application by selecting <b>Render->Batch Render Queue</b> from menu.</li>
<li> Press <b>Reload Queue</b> button to display render items that have been added to render queue since it was opened.</li>
<li> Use <b>Delete Selected</b> and <b>Delete Finished</b> buttons to remove items from queue.</li>
<li> Use checkbox widget in the Render column to select which items will be rendered.</li>
<li> Press <b>Render</b> button to begin rendering.</li>
<li> <b>Right Mouse Click</b> render item to show render item context menu.</li>
<li> <b>Save Item Project As...</b> allows th user to save the Project file of the render item into same other location</li>
<li> <b>Render Properties</b> displays the render properties that were set when the item was added to render queue.</li>
<li> <b>Delete</b> deletes the item from queue</li>

<h3>Rendering behind the scenes: MLT and libavformat(FFMpeg)</h3>

Flowblade Movie Editor is a Python application interfacing to MLT multitrack media framework.
Other video editing applications build on top of MLT include OpenShot and Kdenlive.

MLT uses C-library libavformat(FFMpeg) to render output files, and rendering is defined by setting FFMpeg encoding parameters.
These parameters are delivered from Flowblade Movie Editor to MLT by creating a "avformat" Consumer object for
a  given Render Profile, and then setting its Rendering Args.
These latter arguments are exactly the same which are used when using FFmpeg to encode video files.

Rendering arguments for encoding different types of video files are pre-packed and can be selected using
Encocing / Format and Quality Drop Down Menus. Arguments can be refined
by checking Render with args Checkbox and changing args values and/or adding/removing args.

Any kind of video files supported by the installed version of MLT can be encoded by creating a user defined
Render Profile and setting its Rendering Args. Google for FFMpeg encoding to find Args combinations for different video files.

Search web for information on encoding files with FFMpeg to get examples of Rendering Args that can be used.

<h3>Flowblade rendering pipeline</h3>

http://sites.google.com/site/phantom2dsite/Home/encoding.png

http://sites.google.com/site/phantom2dsite/Home/flowbladeappicon.png
----
<h2>Tools</h2>

<h3> Titler </h3>
<li> Add and remove layers in Layers area</li>
<li> Edit layer properties and text in Active Layer area</li>
<li> Set text position by dragging the active layer around in the view editor</li>
<li> Set background image from Timeline to position texts appropriately by dragging frame pointer in the Position Bar</li>
<li> Load and Save layers data in Layers Area</li>

<h3> Audio Mixer </h3>
<li> Monitor audio levels on VU meters during playback</li>
<li> Use sliders to set volume for tracks or Master Out</li>
<li> Click <b>Pan</b> button to activate pannig slider and use it to pan audio  </li>

<h3> Media Relinker </h3>
<li> <b>Media Relinker</b> is a standalone application running in its own process and does not affect the project that is open in Flowblade</li>
<li> Start by pressing <b>Load Project For Relinking</b> button and select the project you wish to relink</li>
<li> Select the media file you wish to replace with some other media file. Press <b>Set File Relink Path</b> button or press <b>Right Mouse</b> on item to start selecting the new file. Clips and wipes in the project are linked to this new media file. </li>
<li> Use drop down menu at bottom left to display either missing or found media files</li>
<li> Press <b>Save Relinked Project As...</b> button to save the relinked version of the project</li>
<li> Open the relinked project in Flowblade and continue working with it</li>
<li> When relinking a project you have open in Flowblade at the same time <b>make sure that do not overwrite the relinked version of project when saving the project you have open in Flowblade</b></li>

http://sites.google.com/site/phantom2dsite/Home/flowbladeappicon.png

</div>
</div>
</body>

</html> 
